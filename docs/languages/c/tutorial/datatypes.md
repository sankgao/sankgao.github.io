---
title: 数据类型
icon: data-type
date: 2024-02-23
category: Languages
tag:
    - C
---

C 语言的每一种数据，都是有类型（type）的，编译器必须知道数据的类型，才能操作数据。所谓 “类型”，就是相似的数据所拥有的共同特征，那么一旦知道某个值的数据类型，就能知道该值的特征和操作方式。

基本数据类型有三种：字符（char）、整数（int）和浮点数（float）。复杂的类型都是基于它们构建的。

## 数据类型

|  类型关键字  |  类型关键字  |  存储大小  |  值范围  |
|  :----  |  :----  |  :----  |  :----  |
|  字符型  |  char  |  1 字节  |  -2^(8-1)^ ~ 2^(8-1)^ - 1 即 -128 ~ 127  |
|  有符号字符型  |  signed char  |  1 字节  |  -2^(8-1)^ ~ 2^(8-1)^ - 1 即 -128 ~ 127  |
|  无符号字符型  |  unsigned char  |  1 字节  |  0 ~ 2^(8)^ - 1 即 0 ~ 255  |
|  整型  |  int  |  4 字节  |  -2^(32-1)^ ~ 2^(32-1)^ - 1 即 -2,147,483,648 ~ 2,147,483,647  |
|  有符号整型  |  signed int  |  4 字节  |  -2^(32-1)^ ~ 2^(32-1)^ - 1 即 -2,147,483,648 ~ 2,147,483,647  |
|  无符号整型  |  unsigned int  |  4 字节  |  0 ~ 2^(32)^ - 1 即 0 ~ 4,294,967,295  |
|  短整型  |  short int  |  2 字节  |  -2^(16-1)^ ~ 2^(16-1)^ - 1 即 -32,768 ~ 32,767  |
|  有符号短整型  |  signed short int  |  2 字节  |  -2^(16-1)^ ~ 2^(16-1)^ - 1 即 -32,768 ~ 32,767  |
|  无符号短整型  |  unsigned short int  |  2 字节  |  0 ~ 2^(16)^ - 1 即 0 ~ 65,535  |
|  长整型  |  long int  |  4 字节  |  -2^(32-1)^ ~ 2^(32-1)^ - 1 即 -2,147,483,648 ~ 2,147,483,647  |
|  有符号长整型  |  signed long int  |  4 字节  |  -2^(32-1)^ ~ 2^(32-1)^ - 1 即 -2,147,483,648 ~ 2,147,483,647  |
|  无符号长整型  |  unsigned long int  |  4 字节  |  0 ~ 2^(32)^ - 1 即 0 ~ 4,294,967,295  |
|  长长整型  |  long long int  |  8 字节  |  -2^(64-1)^ ~ 2^(64-1)^ - 1 即 -9,223,372,036,854,775,808 ~ 9,223,372,036,854,775,807  |
|  有符号长长整型  |  signed long long int  |  8 字节  |  -2^(64-1)^ ~ 2^(64-1)^ - 1 即 -9,223,372,036,854,775,808 ~ 9,223,372,036,854,775,807  |
|  无符号长长整型  |  unsigned long long int  |  8 字节  |  0 ~ 2^(64)^ - 1 即 0 ~ 18,446,744,073,709,551,615  |
|  单精度浮点数  |  float  |  4 字节  |    |
|  双精度浮点数  |  double  |  8 字节  |    |
|  长双精度浮点数  |  long double  |  10 字节	  |    |

## 字符类型

字符类型指的是单个字符，类型声明使用 `char` 关键字。例如：

```c
char c = 'B';
```

C 语言规定，字符常量必须放在单引号里面。

在计算机内部，字符类型使用一个字节（8位）存储。C 语言将其当作整数处理，所以字符类型就是宽度为一个字节的整数。每个字符对应一个整数（由 ASCII 码确定），比如 B 对应整数 66。

字符类型在不同计算机的默认范围是不一样的。一些系统默认为 `-128 ~ 127`，另一些系统默认为 `0 ~ 255`。这两种范围正好都能覆盖 `0 ~ 127` 的 ASCII 字符范围。

只要在字符类型的范围之内，整数与字符是可以互换的，都可以赋值给字符类型的变量。例如：

```c
char c = 66;
// 等同于
char c = 'B';
```

两个字符类型的变量可以进行数学运算，字符类型变量 a 和 b 相加，视同两个整数相加。例如：

```c
char a = 'B';  // 等同于 char a = 66;
char b = 'C';  // 等同于 char b = 67;

printf("%d\n", a + b);  // 输出 133
```

单引号本身也是一个字符，如果要表示这个字符常量，必须使用反斜杠转义。例如：

```c
char t = '\'';
```

这种转义的写法，主要用来表示 ASCII 码定义的一些无法打印的控制字符，它们也属于字符类型的值。

- **\a**：警报，这会使得终端发出警报声或出现闪烁，或者两者同时发生
- **\b**：退格键，光标回退一个字符，但不删除字符
- **\f**：换页符，光标移到下一页。在现代系统上，这已经反映不出来了，行为改成类似于 `\v`
- **\n**：换行符
- **\r**：回车符，光标移到同一行的开头
- **\t**：制表符，光标移到下一个水平制表位，通常是下一个 8 的倍数
- **\v**：垂直分隔符，光标移到下一个垂直制表位，通常是下一行的同一列
- **\0**：null 字符，代表没有内容。注意，这个值不等于数字 0

转义写法还能使用八进制和十六进制表示一个字符。

- **\nn**：字符的八进制写法，nn 为八进制值
- **\xnn**：字符的十六进制写法，nn 为十六进制值

以下四种写法都是等价的：

```c
char x = 'B';
char x = 66;
char x = '\102'; // 八进制
char x = '\x42'; // 十六进制
```

## 整数类型

### 简介

整数类型用来表示较大的整数，类型声明使用 `int` 关键字。例如：

```c
int a;
```

不同计算机的 `int` 类型的大小是不一样的。比较常见的是使用 `4` 个字节（32位）存储一个 `int` 类型的值，但是 `2` 个字节（16 位）或 `8` 个字节（64位）也有可能使用。它们可以表示的整数范围如下：

- **16位**：-32,768 ~ 32,767
- **32位**：-2,147,483,648 ~ 2,147,483,647
- **64位**：-9,223,372,036,854,775,808 ~ 9,223,372,036,854,775,807

### signed 和 unsigned

C 语言使用 `signed` 关键字，表示一个类型带有正负号，包含负值；使用 `unsigned` 关键字，表示该类型不带有正负号，只能表示零和正整数。

对于 `int` 类型，默认是带有正负号的，也就是说 `int` 等同于 `signed int`。由于这是默认情况，关键字 `signed` 一般都省略不写，但是写了也不算错。例如：

```c
signed int a;
// 等同于
int a;
```

`int` 类型也可以不带正负号，只表示非负整数。这时就必须使用关键字 `unsigned` 声明变量。例如：

```c
unsigned int a;
```

整数变量声明为 `unsigned` 的好处是，同样长度的内存能够表示的最大整数值，增大了一倍。比如，16位的 `signed int` 最大值为 `32,767`，而 `unsigned int` 的最大值增大到了 `65,535`。

`unsigned int` 里面的 `int` 可以省略，所以上面的变量声明也可以写成下面这样：

```c
unsigned a;
```

字符类型 `char` 也可以设置 `signed` 和 `unsigned`。例如：

```c
signed char c;  // 范围为 -128 到 127
unsigned char c;  // 范围为 0 到 255
```

::: warning
C 语言规定 char 类型默认是否带有正负号，由当前系统决定。这就是说，`char` 不等同于 `signed char`，它有可能是 `signed char`，也有可能是 `unsigned char`。这一点与 `int` 不同，`int` 就是等同于 `signed int`
:::

### 整数的子类型

如果 `int` 类型使用 4 个或 8 个字节表示一个整数，对于小整数，这样做很浪费空间。另一方面，某些场合需要更大的整数，8 个字节还不够。为了解决这些问题，C 语言在 `int` 类型之外，又提供了三个整数的子类型。这样有利于更精细地限定整数变量的范围，也有利于更好地表达代码的意图。

- **short int（简写为 short）**：占用空间不多于 `int`，一般占用 2 个字节（整数范围为 -32768 ~ 32767）
- **long int（简写为 long）**：占用空间不少于 `int`，至少为 4 个字节
- **long long int（简写为 long long）**：占用空间多于 `long`，至少为 8 个字节

```c
short int a;
long int b;
long long int c;
```

默认情况下，short、long、long long 都是带符号的（signed），即 `signed` 关键字省略了。它们也可以声明为不带符号（unsigned），使得能够表示的最大值扩大一倍。

```c
unsigned short int a;
unsigned long int b;
unsigned long long int c;
```

C 语言允许省略 `int`，所以变量声明语句也可以写成下面这样：

```c
short a;
unsigned short a;

long b;
unsigned long b;

long long c;
unsigned long long c;
```

不同的计算机，数据类型的字节长度是不一样的。确实需要32位整数时，应使用 `long` 类型而不是 `int` 类型，可以确保不少于 4 个字节；确实需要64位的整数时，应该使用 `long long` 类型，可以确保不少于 8 个字节。另一方面，为了节省空间，只需要16位整数时，应使用 `short` 类型；需要8位整数时，应该使用 `char` 类型。

### 整数类型的极限值

有时候需要查看，当前系统不同整数类型的最大值和最小值，C 语言的头文件limits.h提供了相应的常量，比如SCHAR_MIN代表 signed char 类型的最小值-128，SCHAR_MAX代表 signed char 类型的最大值127。

为了代码的可移植性，需要知道某种整数类型的极限值时，应该尽量使用这些常量。
