---
title: nslookup
icon: command
date: 2024-07-16
category: 命令集
tag:
    - CMD
---

## 描述

`nslookup` 用于显示可用于诊断域名系统（DNS）基础结构的信息。在使用此工具之前，应熟悉 DNS 的工作原理。仅当已安装 TCP/IP 协议时，`nslookup` 命令行工具才可用。

`nslookup` 命令行工具有两种模式：**交互式** 和 **非交互式。**

如果需要仅查找单个数据片段，或者在脚本、命令行或 PowerShell 中使用了 `nslookup`，请使用非交互模式。在非交互模式（也称为命令模式）下，第一个命令行参数是要查找的计算机名称或 IP 地址。第二个参数则是 DNS 名称服务器的名称或 IP 地址。如果忽略第二个参数，`nslookup` 将使用默认的 DNS 名称服务器。

如果需要查找多个数据片段或设置多个配置，可以使用交互模式。要进入交互模式，请在 `nslookup` 命令行中键入连字符（`-`），而不是第一个参数。对于第二个参数，请输入 DNS 名称服务器的名称或 IP 地址。如果忽略第二个参数，`nslookup` 将使用默认的 DNS 名称服务器。还可以通过在命令提示符处直接输入 `nslookup`，然后输入名称或 IP 地址以在交互式命令行中搜索来调用交互模式。

单独输入 `nslookup -` 或 `nslookup` 后，命令提示符将更改为交互式提示符 `>`。在交互模式下，可以：

- 在单独的行中输入名称或 IP 地址、set 变量和其他选项
- 随时通过按 <kbd>Ctrl</kbd> + <kbd>B</kbd> 键中断交互式命令
- 通过输入 `exit` 退出
- 将内置命令视为计算机名称，方法是在它前面加上转义字符（`\`）。无法识别的命令将被解释为计算机名称
- 如果要查找的计算机是 IP 地址，并且查询针对 A 或 PTR 资源记录类型，则返回计算机的名称

## 选项

|  选项  |  描述  |
|  :----:  |  :----  |
|  `exit`  |  退出 nslookup 命令行工具  |
|  `help`  |  显示子命令的简短摘要  |
|  `ls`  |  列出 DNS 域的信息  |
|  `server`  |  将默认服务器更改为指定的 DNS 域  |
|  `set`  |  更改影响查找的行为方式的配置设置  |

## 示例

### 非交互模式

例如：在位于 `1.1.1.1` 的 DNS 名称服务器上查找域名 `mydomain.com` 的 IP 地址。

```cmd
C:\Users\user>nslookup mydomain.com 1.1.1.1
```

例如：在默认 DNS 名称服务器上查找 IP 地址 `4.4.4.4` 的域名。

```cmd
C:\Users\user>nslookup 4.4.4.4
```

### 交互模式

例如：将 nslookup 置于交互式模式下，并将 `1.1.1.1` 设置为默认 DNS 查找服务器。

```cmd
C:\Users\user>nslookup - 1.1.1.1
```

例如：在交互式提示符处，返回当前服务器的 `nslookup` 选项和参数设置。

```cmd
> set all
```

例如：交互式提示符处，返回 `mydomain.com` 的 IP 地址。

```cmd
> mydomain.com
```

例如：交互式提示符处，将默认 DNS 名称服务器更改为 `4.4.4.4`。

```cmd
> server 4.4.4.4
```

例如：交互式提示符处，退出交互式模式并返回到 Windows 命令提示符。

```cmd
> exit
C:\Users\user>
```
