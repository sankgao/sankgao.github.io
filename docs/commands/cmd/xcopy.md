---
title: xcopy
icon: command
date: 2024-07-16
category: 命令集
tag:
    - CMD
---

## 描述

`xcopy` 用于复制文件和目录，包括子目录。

## 选项

|  选项  |  描述  |
|  :----:  |  :----  |
|  `/e`  |  复制所有子目录，即使它们是空的  |
|  `/f`  |  复制时显示源文件名和目标文件名  |
|  `/h`  |  复制具有隐藏文件和系统文件属性的文件。默认情况下，`xcopy` 不会复制隐藏文件或系统文件  |
|  `/l`  |  生成要复制的文件列表，但不主动复制文件  |
|  `/q`  |  禁止显示 `xcopy` 消息  |
|  `/t`  |  仅复制子目录结构（即树），而不复制文件。若要复制空目录，必须包含 `/e` 命令行选项  |
|  `/w`  |  在开始复制文件之前显示以下消息并等待您的响应：准备开始复制文件时，请按任意键  |
|  `/s`  |  复制目录和子目录，除非它们是空的。如果省略 `/s`，则 `xcopy` 在单个目录中运行  |
|  `/y`  |  禁止提示您确认覆盖现有目标文件  |
|  `/-y`  |  提示您确认覆盖现有目标文件  |
|  `/z`  |  如果在复制阶段断开连接（如：服务器脱机），可在重新建立连接后使用 `/z` 恢复；`/z` 还会显示百分比  |
|  `/?`  |  在命令提示符下显示帮助  |

## 示例

### 复制时显示源文件名和目标文件名

查看 D 盘根目录：

```cmd
E:\test>dir D:\
 驱动器 D 中的卷没有标签。
 卷的序列号是 FED4-A346

 D:\ 的目录

2024/03/13  15:32    <DIR>          System
2024/03/13  09:52    <DIR>          VMware
               0 个文件              0 字节
               2 个目录 216,650,141,696 可用字节

E:\test>
```

查看当前目录下的 `test01` 目录：

```cmd
E:\test>dir test01
 驱动器 E 中的卷没有标签。
 卷的序列号是 02E3-C833

 E:\test\test01 的目录

2024/07/16  18:24    <DIR>          .
2024/07/16  18:24    <DIR>          ..
2024/07/11  18:46                 0 test01.txt
2024/07/16  18:22    <DIR>          test02
2024/07/16  18:24                 0 test02.txt
               2 个文件              0 字节
               3 个目录 696,717,549,568 可用字节

E:\test>
```

复制 `test01` 目录下的所有文件，不包括子目录：

```cmd
E:\test>xcopy /f test01 D:\
E:\test\test01\test01.txt -> D:\test01.txt
E:\test\test01\test02.txt -> D:\test02.txt
复制了 2 个文件

E:\test>
```

查看 D 盘根目录：

```cmd
E:\test>dir D:\
 驱动器 D 中的卷没有标签。
 卷的序列号是 FED4-A346

 D:\ 的目录

2024/03/13  15:32    <DIR>          System
2024/07/11  18:46                 0 test01.txt
2024/07/16  18:24                 0 test02.txt
2024/03/13  09:52    <DIR>          VMware
               2 个文件              0 字节
               2 个目录 216,650,141,696 可用字节

E:\test>
```

### 复制目录和子目录

查看 D 盘根目录：

```cmd
E:\test>dir D:\
 驱动器 D 中的卷没有标签。
 卷的序列号是 FED4-A346

 D:\ 的目录

2024/03/13  15:32    <DIR>          System
2024/03/13  09:52    <DIR>          VMware
               0 个文件              0 字节
               2 个目录 216,650,141,696 可用字节

E:\test>
```

查看当前目录下的 `test01` 目录：

```cmd
E:\test>dir test01
 驱动器 E 中的卷没有标签。
 卷的序列号是 02E3-C833

 E:\test\test01 的目录

2024/07/16  18:24    <DIR>          .
2024/07/16  18:24    <DIR>          ..
2024/07/11  18:46                 0 test01.txt
2024/07/16  18:22    <DIR>          test02
2024/07/16  18:24                 0 test02.txt
               2 个文件              0 字节
               3 个目录 696,717,549,568 可用字节

E:\test>
```

复制 `test01` 目录下的所有文件，包括子目录，但不包括空子目录：

```cmd
E:\test>xcopy /s test01 D:\
test01\test01.txt
test01\test02.txt
test01\test02\test01.txt
复制了 3 个文件

E:\test>
```

查看 D 盘根目录：

```cmd
E:\test>dir D:\
 驱动器 D 中的卷没有标签。
 卷的序列号是 FED4-A346

 D:\ 的目录

2024/03/13  15:32    <DIR>          System
2024/07/11  18:46                 0 test01.txt
2024/07/16  18:57    <DIR>          test02
2024/07/16  18:24                 0 test02.txt
2024/03/13  09:52    <DIR>          VMware
               2 个文件              0 字节
               3 个目录 216,650,141,696 可用字节

E:\test>dir D:\test02
 驱动器 D 中的卷没有标签。
 卷的序列号是 FED4-A346

 D:\test02 的目录

2024/07/16  18:57    <DIR>          .
2024/07/16  18:57    <DIR>          ..
2024/07/16  17:52                 0 test01.txt
               1 个文件              0 字节
               2 个目录 216,650,141,696 可用字节

E:\test>
```

### 生成要复制的文件列表

查看 D 盘根目录：

```cmd
E:\test>dir D:\
 驱动器 D 中的卷没有标签。
 卷的序列号是 FED4-A346

 D:\ 的目录

2024/03/13  15:32    <DIR>          System
2024/03/13  09:52    <DIR>          VMware
               0 个文件              0 字节
               2 个目录 216,650,141,696 可用字节

E:\test>
```

生成要复制的文件列表，但不主动复制文件：

```cmd
E:\test>xcopy /l test01\ D:\
test01\test01.txt
1 个文件

E:\test>
```

查看 D 盘根目录：

```cmd
E:\test>dir D:\
 驱动器 D 中的卷没有标签。
 卷的序列号是 FED4-A346

 D:\ 的目录

2024/03/13  15:32    <DIR>          System
2024/03/13  09:52    <DIR>          VMware
               0 个文件              0 字节
               2 个目录 216,650,141,696 可用字节

E:\test>
```
