import{_ as n}from"./plugin-vue_export-helper-x3n3nnut.js";import{o as s,c as a,f as e}from"./app-rs2N1WFM.js";const t={},i=e(`<h2 id="问题" tabindex="-1"><a class="header-anchor" href="#问题" aria-hidden="true">#</a> 问题</h2><p>Jenkins 服务启动失败：<code>jenkins: failed to find a valid Java installation</code>。</p><p><strong>报错日志如下：</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl status jenkins.service

● jenkins.service - Jenkins Continuous Integration Server
   Loaded: loaded <span class="token punctuation">(</span>/lib/systemd/system/jenkins.service<span class="token punctuation">;</span> enabled<span class="token punctuation">;</span> vendor preset: enabled<span class="token punctuation">)</span>
   Active: failed <span class="token punctuation">(</span>Result: exit-code<span class="token punctuation">)</span> since Fri <span class="token number">2024</span>-04-19 05:11:00 UTC<span class="token punctuation">;</span> 1min 20s ago
  Process: <span class="token number">71810</span> <span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/usr/bin/jenkins <span class="token punctuation">(</span>code<span class="token operator">=</span>exited, <span class="token assign-left variable">status</span><span class="token operator">=</span><span class="token number">1</span>/FAILURE<span class="token punctuation">)</span>
 Main PID: <span class="token number">71810</span> <span class="token punctuation">(</span>code<span class="token operator">=</span>exited, <span class="token assign-left variable">status</span><span class="token operator">=</span><span class="token number">1</span>/FAILURE<span class="token punctuation">)</span>

Apr <span class="token number">19</span> 05:11:00 localhost.localdomain systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: Failed to start Jenkins Continuous Integration Server.
Apr <span class="token number">19</span> 05:11:00 localhost.localdomain systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: jenkins.service: Service hold-off <span class="token function">time</span> over, scheduling restart.
Apr <span class="token number">19</span> 05:11:00 localhost.localdomain systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: jenkins.service: Scheduled restart job, restart counter is at <span class="token number">8</span>.
Apr <span class="token number">19</span> 05:11:00 localhost.localdomain systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: Stopped Jenkins Continuous Integration Server.
Apr <span class="token number">19</span> 05:11:00 localhost.localdomain systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: jenkins.service: Start request repeated too quickly.
Apr <span class="token number">19</span> 05:11:00 localhost.localdomain systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: jenkins.service: Failed with result <span class="token string">&#39;exit-code&#39;</span><span class="token builtin class-name">.</span>
Apr <span class="token number">19</span> 05:11:00 localhost.localdomain systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: Failed to start Jenkins Continuous Integration Server.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>journalctl <span class="token parameter variable">-xe</span>

-- Unit jenkins.service has begun starting up.
Apr <span class="token number">19</span> 05:11:00 localhost.localdomain jenkins<span class="token punctuation">[</span><span class="token number">71810</span><span class="token punctuation">]</span>: jenkins: failed to <span class="token function">find</span> a valid Java installation
Apr <span class="token number">19</span> 05:11:00 localhost.localdomain systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: jenkins.service: Main process exited, <span class="token assign-left variable">code</span><span class="token operator">=</span>exited, <span class="token assign-left variable">status</span><span class="token operator">=</span><span class="token number">1</span>/FAILURE
Apr <span class="token number">19</span> 05:11:00 localhost.localdomain systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: jenkins.service: Failed with result <span class="token string">&#39;exit-code&#39;</span><span class="token builtin class-name">.</span>
Apr <span class="token number">19</span> 05:11:00 localhost.localdomain systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: Failed to start Jenkins Continuous Integration Server.
-- Subject: Unit jenkins.service has failed
-- Defined-By: systemd
-- Support: http://www.ubuntu.com/support
--
-- Unit jenkins.service has failed.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="原因" tabindex="-1"><a class="header-anchor" href="#原因" aria-hidden="true">#</a> 原因</h2><p>Jenkins 当前版本依赖的 Java 版本和已安装的 Java 版本不同；或找不到 Java 位置。</p><h2 id="解决方法" tabindex="-1"><a class="header-anchor" href="#解决方法" aria-hidden="true">#</a> 解决方法</h2><h3 id="解决方法-1" tabindex="-1"><a class="header-anchor" href="#解决方法-1" aria-hidden="true">#</a> 解决方法 1</h3><p>Jenkins 当前版本依赖的 Java 版本和已安装的 Java 版本不同。安装支持 Jenkins 版本依赖的 Java 版本。例如：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> yum <span class="token function">install</span> <span class="token parameter variable">-y</span> java-17-openjdk-devel.x86_64
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="解决方法-2" tabindex="-1"><a class="header-anchor" href="#解决方法-2" aria-hidden="true">#</a> 解决方法 2</h3><p>由于 Java 安装在其他位置，Jenkins 服务找不到 Java 位置。修改 <code>jenkins.service</code> 文件中 <code>JAVA_HOME</code> 的值。例如：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token assign-left variable">Environment</span><span class="token operator">=</span><span class="token string">&quot;JAVA_HOME=/opt/jdk/jdk-17.0.10&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>重新加载 systemd 管理器的配置，并重启 Jenkins 服务：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl daemon-reload
<span class="token function">sudo</span> systemctl restart jenkins
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>`,16),l=[i];function o(c,p){return s(),a("div",null,l)}const u=n(t,[["render",o],["__file","java_version.html.vue"]]);export{u as default};
