import{_ as i}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as c,o as u,c as r,a as d,d as p,w as a,b as n,f as l,e as s}from"./app-8CNhWw08.js";const v={},m=n("p",null,"使用 VuePress 遇到的一些问题。",-1),b=l(`<h2 id="node-内存泄漏耗尽" tabindex="-1"><a class="header-anchor" href="#node-内存泄漏耗尽" aria-hidden="true">#</a> Node 内存泄漏耗尽</h2><div class="hint-container caution"><p class="hint-container-title">警告</p><p>致命错误：使用任何 “NPM” 命令时 JavaScript 堆将耗尽内存</p></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token operator">&lt;</span>--- Last few GCs ---<span class="token operator">&gt;</span>

<span class="token punctuation">[</span><span class="token number">124370</span>:0x5a07190<span class="token punctuation">]</span>   <span class="token number">623191</span> ms: Mark-sweep <span class="token number">880.9</span> <span class="token punctuation">(</span><span class="token number">910.2</span><span class="token punctuation">)</span> -<span class="token operator">&gt;</span> <span class="token number">871.8</span> <span class="token punctuation">(</span><span class="token number">909.2</span><span class="token punctuation">)</span> MB, <span class="token number">650.3</span> / <span class="token number">0.0</span> ms  <span class="token punctuation">(</span>average mu <span class="token operator">=</span> <span class="token number">0.137</span>, current mu <span class="token operator">=</span> <span class="token number">0.050</span><span class="token punctuation">)</span> allocation failure<span class="token punctuation">;</span> scavenge might not succeed
<span class="token punctuation">[</span><span class="token number">124370</span>:0x5a07190<span class="token punctuation">]</span>   <span class="token number">623738</span> ms: Mark-sweep <span class="token number">879.6</span> <span class="token punctuation">(</span><span class="token number">909.2</span><span class="token punctuation">)</span> -<span class="token operator">&gt;</span> <span class="token number">871.8</span> <span class="token punctuation">(</span><span class="token number">908.9</span><span class="token punctuation">)</span> MB, <span class="token number">526.0</span> / <span class="token number">0.0</span> ms  <span class="token punctuation">(</span>average mu <span class="token operator">=</span> <span class="token number">0.091</span>, current mu <span class="token operator">=</span> <span class="token number">0.038</span><span class="token punctuation">)</span> allocation failure<span class="token punctuation">;</span> scavenge might not succeed

<span class="token operator">&lt;</span>--- JS stacktrace ---<span class="token operator">&gt;</span>

FATAL ERROR: Ineffective mark-compacts near heap limit Allocation failed - JavaScript heap out of memory
 <span class="token number">1</span>: 0xb6e500 node::Abort<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>/usr/local/node/bin/node<span class="token punctuation">]</span>
 <span class="token number">2</span>: 0xa7e632  <span class="token punctuation">[</span>/usr/local/node/bin/node<span class="token punctuation">]</span>
 <span class="token number">3</span>: 0xd47f20 v8::Utils::ReportOOMFailure<span class="token punctuation">(</span>v8::internal::Isolate*, char const*, bool<span class="token punctuation">)</span> <span class="token punctuation">[</span>/usr/local/node/bin/node<span class="token punctuation">]</span>
 <span class="token number">4</span>: 0xd482c7 v8::internal::V8::FatalProcessOutOfMemory<span class="token punctuation">(</span>v8::internal::Isolate*, char const*, bool<span class="token punctuation">)</span> <span class="token punctuation">[</span>/usr/local/node/bin/node<span class="token punctuation">]</span>
 <span class="token number">5</span>: 0xf25685  <span class="token punctuation">[</span>/usr/local/node/bin/node<span class="token punctuation">]</span>
 <span class="token number">6</span>: 0xf26588 v8::internal::Heap::RecomputeLimits<span class="token punctuation">(</span>v8::internal::GarbageCollector<span class="token punctuation">)</span> <span class="token punctuation">[</span>/usr/local/node/bin/node<span class="token punctuation">]</span>
 <span class="token number">7</span>: 0xf36a93  <span class="token punctuation">[</span>/usr/local/node/bin/node<span class="token punctuation">]</span>
 <span class="token number">8</span>: 0xf37908 v8::internal::Heap::CollectGarbage<span class="token punctuation">(</span>v8::internal::AllocationSpace, v8::internal::GarbageCollectionReason, v8::GCCallbackFlags<span class="token punctuation">)</span> <span class="token punctuation">[</span>/usr/local/node/bin/node<span class="token punctuation">]</span>
 <span class="token number">9</span>: 0xf1226e v8::internal::HeapAllocator::AllocateRawWithLightRetrySlowPath<span class="token punctuation">(</span>int, v8::internal::AllocationType, v8::internal::AllocationOrigin, v8::internal::AllocationAlignment<span class="token punctuation">)</span> <span class="token punctuation">[</span>/usr/local/node/bin/node<span class="token punctuation">]</span>
<span class="token number">10</span>: 0xf13637 v8::internal::HeapAllocator::AllocateRawWithRetryOrFailSlowPath<span class="token punctuation">(</span>int, v8::internal::AllocationType, v8::internal::AllocationOrigin, v8::internal::AllocationAlignment<span class="token punctuation">)</span> <span class="token punctuation">[</span>/usr/local/node/bin/node<span class="token punctuation">]</span>
<span class="token number">11</span>: 0xef480a v8::internal::Factory::NewFillerObject<span class="token punctuation">(</span>int, v8::internal::AllocationAlignment, v8::internal::AllocationType, v8::internal::AllocationOrigin<span class="token punctuation">)</span> <span class="token punctuation">[</span>/usr/local/node/bin/node<span class="token punctuation">]</span>
<span class="token number">12</span>: 0x12b7daf v8::internal::Runtime_AllocateInYoungGeneration<span class="token punctuation">(</span>int, unsigned long*, v8::internal::Isolate*<span class="token punctuation">)</span> <span class="token punctuation">[</span>/usr/local/node/bin/node<span class="token punctuation">]</span>
<span class="token number">13</span>: 0x16e99f9  <span class="token punctuation">[</span>/usr/local/node/bin/node<span class="token punctuation">]</span>
error Command failed with signal <span class="token string">&quot;SIGABRT&quot;</span><span class="token builtin class-name">.</span>
info Visit https://yarnpkg.com/en/docs/cli/run <span class="token keyword">for</span> documentation about this command.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="解决办法" tabindex="-1"><a class="header-anchor" href="#解决办法" aria-hidden="true">#</a> 解决办法</h3><p>在 <code>package.json</code> 文件中将 <code>&quot;dev&quot;</code> 和 <code>&quot;build&quot;</code> 参数中添加 <code>node --max_old_space_size=4096 ./node_modules/vuepress/cli.js</code> 值</p><p>修改前：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>  <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vuepress dev docs&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vuepress build docs&quot;</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>修改后：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>  <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node --max_old_space_size=4096 ./node_modules/vuepress/cli.js dev docs&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node --max_old_space_size=4096 ./node_modules/vuepress/cli.js build docs&quot;</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="usexxx-is-called-without-provider" tabindex="-1"><a class="header-anchor" href="#usexxx-is-called-without-provider" aria-hidden="true">#</a> useXXX() is called without provider</h2><p>此类错误通常是因为项目中错误的含有多个 <code>@vue/xxx</code>、<code>@vuepress/xxx</code>、<code>vue</code> 或 <code>vue-router</code> 版本引起的。</p><p>请确保您正在使用最新的 <code>vuepress</code> 和 <code>vuepress-theme-hope</code> 版本：</p>`,12),k=n("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[n("pre",{class:"language-bash"},[n("code",null,[n("span",{class:"token function"},"pnpm"),s(),n("span",{class:"token function"},"add"),s(" @vuepress/client@next vuepress@next vuepress-theme-hope vue@latest "),n("span",{class:"token parameter variable"},"-E"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"})])],-1),h=n("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[n("pre",{class:"language-bash"},[n("code",null,[n("span",{class:"token function"},"yarn"),s(),n("span",{class:"token function"},"add"),s(" vuepress@next vuepress-theme-hope@latest "),n("span",{class:"token parameter variable"},"-E"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"})])],-1),g=n("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[n("pre",{class:"language-bash"},[n("code",null,[n("span",{class:"token function"},"npm"),s(" i vuepress@next vuepress-theme-hope@latest "),n("span",{class:"token parameter variable"},"-E"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"})])],-1),x=n("p",null,"同时，升级依赖以确保您的项目只包含单个版本的相关包：",-1),_=n("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[n("pre",{class:"language-bash"},[n("code",null,[n("span",{class:"token function"},"pnpm"),s(` dlx vp-update
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"})])],-1),f=n("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[n("pre",{class:"language-bash"},[n("code",null,[n("span",{class:"token function"},"yarn"),s(` dlx vp-update
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"})])],-1),A=n("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[n("pre",{class:"language-bash"},[n("code",null,`npx vp-update
`)]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"})])],-1),y=l(`<div class="hint-container warning"><p class="hint-container-title">注意</p><p>任何以 <code>@vuepress/</code> 开头的官方包应该和 VuePress 保持相同版本。</p><p>比如：如果您正在使用 <code>@vuepress/plugin-search</code> 和 <code>@vuepress/utils</code>，您应该确保他们和 <code>vuepress</code> 版本相同。</p><p>另外，<code>vuepress-theme-hope</code> 仓库的插件应与 <code>vuepress-theme-hope</code> 版本相同。</p><p>此外，如果您使用了其他第三方插件，请确保它兼容您要升级到的 VuePress 版本。</p></div><h2 id="引入单个自定义组件不加" tabindex="-1"><a class="header-anchor" href="#引入单个自定义组件不加" aria-hidden="true">#</a> 引入单个自定义组件不加 {}</h2><div class="hint-container caution"><p class="hint-container-title">警告</p><p>如果这是本机自定义元素，请确保通过 <code>compilerOptions.isCustomElement</code> 将其从组件解析中排除</p></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>If this is a native custom element, <span class="token function">make</span> sure to exclude it from component resolution via compilerOptions.isCustomElement.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="解决办法-1" tabindex="-1"><a class="header-anchor" href="#解决办法-1" aria-hidden="true">#</a> 解决办法</h3><p><strong>源代码：</strong></p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> popperPlugin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./plugins/vuepress-plugin-popper&quot;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>修改后的代码：</strong></p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">import</span> popperPlugin <span class="token keyword">from</span> <span class="token string">&quot;./plugins/vuepress-plugin-popper&quot;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,9);function q(w,C){const o=c("CodeTabs");return u(),r("div",null,[m,d(" more "),b,p(o,{id:"36",data:[{id:"pnpm"},{id:"yarn"},{id:"npm"}],"tab-id":"shell"},{title0:a(({value:e,isActive:t})=>[s("pnpm")]),title1:a(({value:e,isActive:t})=>[s("yarn")]),title2:a(({value:e,isActive:t})=>[s("npm")]),tab0:a(({value:e,isActive:t})=>[k]),tab1:a(({value:e,isActive:t})=>[h]),tab2:a(({value:e,isActive:t})=>[g]),_:1}),x,p(o,{id:"50",data:[{id:"pnpm"},{id:"yarn"},{id:"npm"}],"tab-id":"shell"},{title0:a(({value:e,isActive:t})=>[s("pnpm")]),title1:a(({value:e,isActive:t})=>[s("yarn")]),title2:a(({value:e,isActive:t})=>[s("npm")]),tab0:a(({value:e,isActive:t})=>[_]),tab1:a(({value:e,isActive:t})=>[f]),tab2:a(({value:e,isActive:t})=>[A]),_:1}),y])}const j=i(v,[["render",q],["__file","problem.html.vue"]]);export{j as default};
