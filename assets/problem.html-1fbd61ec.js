import{_ as n}from"./plugin-vue_export-helper-c27b6911.js";import{o as s,c as a,a as e,d as t,f as o}from"./app-a6852d78.js";const p={},l=t("p",null,"使用 VuePress 遇到的一些问题。",-1),c=o(`<h2 id="node-内存泄漏耗尽" tabindex="-1"><a class="header-anchor" href="#node-内存泄漏耗尽" aria-hidden="true">#</a> Node 内存泄漏耗尽</h2><div class="hint-container danger"><p class="hint-container-title">警告</p><p>致命错误：使用任何 “NPM” 命令时 JavaScript 堆将耗尽内存</p></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token operator">&lt;</span>--- Last few GCs ---<span class="token operator">&gt;</span>

<span class="token punctuation">[</span><span class="token number">124370</span>:0x5a07190<span class="token punctuation">]</span>   <span class="token number">623191</span> ms: Mark-sweep <span class="token number">880.9</span> <span class="token punctuation">(</span><span class="token number">910.2</span><span class="token punctuation">)</span> -<span class="token operator">&gt;</span> <span class="token number">871.8</span> <span class="token punctuation">(</span><span class="token number">909.2</span><span class="token punctuation">)</span> MB, <span class="token number">650.3</span> / <span class="token number">0.0</span> ms  <span class="token punctuation">(</span>average mu <span class="token operator">=</span> <span class="token number">0.137</span>, current mu <span class="token operator">=</span> <span class="token number">0.050</span><span class="token punctuation">)</span> allocation failure<span class="token punctuation">;</span> scavenge might not succeed
<span class="token punctuation">[</span><span class="token number">124370</span>:0x5a07190<span class="token punctuation">]</span>   <span class="token number">623738</span> ms: Mark-sweep <span class="token number">879.6</span> <span class="token punctuation">(</span><span class="token number">909.2</span><span class="token punctuation">)</span> -<span class="token operator">&gt;</span> <span class="token number">871.8</span> <span class="token punctuation">(</span><span class="token number">908.9</span><span class="token punctuation">)</span> MB, <span class="token number">526.0</span> / <span class="token number">0.0</span> ms  <span class="token punctuation">(</span>average mu <span class="token operator">=</span> <span class="token number">0.091</span>, current mu <span class="token operator">=</span> <span class="token number">0.038</span><span class="token punctuation">)</span> allocation failure<span class="token punctuation">;</span> scavenge might not succeed

<span class="token operator">&lt;</span>--- JS stacktrace ---<span class="token operator">&gt;</span>

FATAL ERROR: Ineffective mark-compacts near heap limit Allocation failed - JavaScript heap out of memory
 <span class="token number">1</span>: 0xb6e500 node::Abort<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>/usr/local/node/bin/node<span class="token punctuation">]</span>
 <span class="token number">2</span>: 0xa7e632  <span class="token punctuation">[</span>/usr/local/node/bin/node<span class="token punctuation">]</span>
 <span class="token number">3</span>: 0xd47f20 v8::Utils::ReportOOMFailure<span class="token punctuation">(</span>v8::internal::Isolate*, char const*, bool<span class="token punctuation">)</span> <span class="token punctuation">[</span>/usr/local/node/bin/node<span class="token punctuation">]</span>
 <span class="token number">4</span>: 0xd482c7 v8::internal::V8::FatalProcessOutOfMemory<span class="token punctuation">(</span>v8::internal::Isolate*, char const*, bool<span class="token punctuation">)</span> <span class="token punctuation">[</span>/usr/local/node/bin/node<span class="token punctuation">]</span>
 <span class="token number">5</span>: 0xf25685  <span class="token punctuation">[</span>/usr/local/node/bin/node<span class="token punctuation">]</span>
 <span class="token number">6</span>: 0xf26588 v8::internal::Heap::RecomputeLimits<span class="token punctuation">(</span>v8::internal::GarbageCollector<span class="token punctuation">)</span> <span class="token punctuation">[</span>/usr/local/node/bin/node<span class="token punctuation">]</span>
 <span class="token number">7</span>: 0xf36a93  <span class="token punctuation">[</span>/usr/local/node/bin/node<span class="token punctuation">]</span>
 <span class="token number">8</span>: 0xf37908 v8::internal::Heap::CollectGarbage<span class="token punctuation">(</span>v8::internal::AllocationSpace, v8::internal::GarbageCollectionReason, v8::GCCallbackFlags<span class="token punctuation">)</span> <span class="token punctuation">[</span>/usr/local/node/bin/node<span class="token punctuation">]</span>
 <span class="token number">9</span>: 0xf1226e v8::internal::HeapAllocator::AllocateRawWithLightRetrySlowPath<span class="token punctuation">(</span>int, v8::internal::AllocationType, v8::internal::AllocationOrigin, v8::internal::AllocationAlignment<span class="token punctuation">)</span> <span class="token punctuation">[</span>/usr/local/node/bin/node<span class="token punctuation">]</span>
<span class="token number">10</span>: 0xf13637 v8::internal::HeapAllocator::AllocateRawWithRetryOrFailSlowPath<span class="token punctuation">(</span>int, v8::internal::AllocationType, v8::internal::AllocationOrigin, v8::internal::AllocationAlignment<span class="token punctuation">)</span> <span class="token punctuation">[</span>/usr/local/node/bin/node<span class="token punctuation">]</span>
<span class="token number">11</span>: 0xef480a v8::internal::Factory::NewFillerObject<span class="token punctuation">(</span>int, v8::internal::AllocationAlignment, v8::internal::AllocationType, v8::internal::AllocationOrigin<span class="token punctuation">)</span> <span class="token punctuation">[</span>/usr/local/node/bin/node<span class="token punctuation">]</span>
<span class="token number">12</span>: 0x12b7daf v8::internal::Runtime_AllocateInYoungGeneration<span class="token punctuation">(</span>int, unsigned long*, v8::internal::Isolate*<span class="token punctuation">)</span> <span class="token punctuation">[</span>/usr/local/node/bin/node<span class="token punctuation">]</span>
<span class="token number">13</span>: 0x16e99f9  <span class="token punctuation">[</span>/usr/local/node/bin/node<span class="token punctuation">]</span>
error Command failed with signal <span class="token string">&quot;SIGABRT&quot;</span><span class="token builtin class-name">.</span>
info Visit https://yarnpkg.com/en/docs/cli/run <span class="token keyword">for</span> documentation about this command.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="解决办法" tabindex="-1"><a class="header-anchor" href="#解决办法" aria-hidden="true">#</a> 解决办法</h3><p>在 <code>package.json</code> 文件中将 <code>&quot;dev&quot;</code> 和 <code>&quot;build&quot;</code> 参数中添加 <code>node --max_old_space_size=4096 ./node_modules/vuepress/cli.js</code> 值</p><p>修改前：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>  <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vuepress dev docs&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vuepress build docs&quot;</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>修改后：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>  <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node --max_old_space_size=4096 ./node_modules/vuepress/cli.js dev docs&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node --max_old_space_size=4096 ./node_modules/vuepress/cli.js build docs&quot;</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>`,9);function i(u,r){return s(),a("div",null,[l,e(" more "),c])}const m=n(p,[["render",i],["__file","problem.html.vue"]]);export{m as default};
