import{_ as e}from"./plugin-vue_export-helper-x3n3nnut.js";import{o as s,c as a,f as n}from"./app-oliGifly.js";const i={},t=n(`<h2 id="debain-系统" tabindex="-1"><a class="header-anchor" href="#debain-系统" aria-hidden="true">#</a> Debain 系统</h2><p>将 <code>gerrit.sh</code> 脚本链接到 <code>rc3.d</code> 目录下：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">ln</span> <span class="token parameter variable">-snf</span> /home/gerrit/review_site/bin/gerrit.sh /etc/init.d/gerrit
<span class="token function">sudo</span> <span class="token function">ln</span> <span class="token parameter variable">-snf</span> /etc/init.d/gerrit /etc/rc3.d/S90gerrit
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>在 <code>/etc/default/</code> 目录下创建 <code>gerritcodereview</code> 文件：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">touch</span> /etc/default/gerritcodereview
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>在 <code>gerritcodereview</code> 文件输入以下内容：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token assign-left variable">GERRIT_SITE</span><span class="token operator">=</span>/home/gerrit/review_site
<span class="token assign-left variable">NO_START</span><span class="token operator">=</span><span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>GERRIT_SITE</strong>：运行 Gerrit 站点的路径</li><li><strong>NO_START</strong>：是否启动 Gerrit 服务</li></ul><h2 id="redhat-系统" tabindex="-1"><a class="header-anchor" href="#redhat-系统" aria-hidden="true">#</a> RedHat 系统</h2><p>在 <code>/usr/lib/systemd/system/</code> 目录下创建 <code>gerrit.service</code> 文件：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">touch</span> /usr/lib/systemd/system/gerrit.service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>在 <code>gerrit.service</code> 文件输入以下内容：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>Unit<span class="token punctuation">]</span>
<span class="token assign-left variable">Description</span><span class="token operator">=</span>Gerrit Code Review
<span class="token assign-left variable">After</span><span class="token operator">=</span>network.target remote-fs.target nss-lookup.target

<span class="token punctuation">[</span>Service<span class="token punctuation">]</span>
<span class="token assign-left variable">Type</span><span class="token operator">=</span>forking
<span class="token assign-left variable">PIDFile</span><span class="token operator">=</span>/home/gerrit/review_site/logs/gerrit.pid
<span class="token assign-left variable">ExecStop</span><span class="token operator">=</span>/home/gerrit/review_site/bin/gerrit.sh stop
<span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/home/gerrit/review_site/bin/gerrit.sh start
<span class="token assign-left variable">ExecReload</span><span class="token operator">=</span>/home/gerrit/review_site/bin/gerrit.sh restart
<span class="token assign-left variable">PrivateTmp</span><span class="token operator">=</span>true

<span class="token punctuation">[</span>Install<span class="token punctuation">]</span>
<span class="token assign-left variable">WantedBy</span><span class="token operator">=</span>multi-user.target
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>重新加载系统管理守护进程（<code>systemd</code>）的配置文件，并设置开机自启：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl daemon-reload
<span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> gerrit.service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>`,15),r=[t];function l(c,o){return s(),a("div",null,r)}const u=e(i,[["render",l],["__file","self_start.html.vue"]]);export{u as default};
