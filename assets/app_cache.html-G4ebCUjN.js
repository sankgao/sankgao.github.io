import{_ as a}from"./plugin-vue_export-helper-x3n3nnut.js";import{o as n,c as s,f as t}from"./app-RG5drPeA.js";const e={},p=t(`<p>使用应用程序缓存，通过创建 <code>cache manifest</code> 文件，可轻松创建 web 应用的离线版本。</p><h2 id="什么是应用程序缓存" tabindex="-1"><a class="header-anchor" href="#什么是应用程序缓存" aria-hidden="true">#</a> 什么是应用程序缓存</h2><p>HTML5 引入了应用程序缓存（Application Cache），这意味着可对 web 应用进行缓存，并可在没有因特网连接时进行访问。</p><p>应用程序缓存为应用带来三个优势：</p><ul><li><strong>离线浏览</strong>：用户可在应用离线时使用它们</li><li><strong>速度</strong>：已缓存资源加载得更快</li><li><strong>减少服务器负载</strong>：浏览器将只从服务器下载更新过或更改过的资源</li></ul><h2 id="html-cache-manifest-实例" tabindex="-1"><a class="header-anchor" href="#html-cache-manifest-实例" aria-hidden="true">#</a> HTML Cache Manifest 实例</h2><p>带有 <code>cache manifest</code> 的 HTML 文档（供离线浏览）。例如：</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">manifest</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./demo_html.appcache<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>timePara<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value javascript language-javascript"><span class="token function">getDateTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>获得日期和事件<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/html5/eg_dragdrop_w3school.gif<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>请打开<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./venus.html<span class="token punctuation">&quot;</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>_blank<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>这个页面<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>，然后脱机浏览，重新加载页面，页面依然可用。<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">function</span> <span class="token function">getDateTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;timePara&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> d<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="cache-manifest-基础" tabindex="-1"><a class="header-anchor" href="#cache-manifest-基础" aria-hidden="true">#</a> Cache Manifest 基础</h2><p>如需启用应用程序缓存，请在文档的 <code>&lt;html&gt;</code> 标签中包含 <code>manifest</code> 属性。例如：</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">HTML</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">manifest</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>demo.appcache<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>每个指定了 <code>manifest</code> 的页面在用户对其访问时都会被缓存。如果未指定 <code>manifest</code> 属性，则页面不会被缓存（除非在 <code>manifest</code> 文件中直接指定了该页面）。</p><p><code>manifest</code> 文件的建议文件扩展名是：“<code>.appcache</code>”。</p><div class="hint-container tip"><p class="hint-container-title">提示</p><p><code>manifest</code> 文件需要设置正确的 <code>MIME-type</code>，即 <code>&quot;text/cache-manifest&quot;</code>。必须在 web 服务器上进行配置</p></div><h2 id="manifest-文件" tabindex="-1"><a class="header-anchor" href="#manifest-文件" aria-hidden="true">#</a> Manifest 文件</h2><p><code>manifest</code> 文件是简单的文本文件，它告知浏览器被缓存的内容（以及不缓存的内容）。</p><p><code>manifest</code> 文件有三个部分：</p><ul><li><strong>CACHE MANIFEST</strong>：在此标题下列出的文件将在首次下载后进行缓存</li><li><strong>NETWORK</strong>：在此标题下列出的文件需要与服务器的连接，且不会被缓存</li><li><strong>FALLBACK</strong>：在此标题下列出的文件规定当页面无法访问时的回退页面（比如 404 页面）</li></ul><h3 id="cache-manifest" tabindex="-1"><a class="header-anchor" href="#cache-manifest" aria-hidden="true">#</a> CACHE MANIFEST</h3><p>第一行 <code>CACHE MANIFEST</code> 是必需的。例如：</p><div class="language-appcache line-numbers-mode" data-ext="appcache"><pre class="language-appcache"><code>CACHE MANIFEST
/theme.css
/logo.gif
/main.js
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面的 <code>manifest</code> 文件列出了三个资源：一个 CSS 文件，一个 GIF 图像，以及一个 JavaScript 文件。</p><p>当 <code>manifest</code> 文件被加载后，浏览器会从网站的根目录下载这三个文件。然后，无论用户何时与因特网断开连接，这些资源依然可用。</p><h3 id="network" tabindex="-1"><a class="header-anchor" href="#network" aria-hidden="true">#</a> NETWORK</h3><p><code>NETWORK</code> 部分规定文件 “<code>login.php</code>” 永远不会被缓存，且离线时是不可用的。例如：</p><div class="language-appcache line-numbers-mode" data-ext="appcache"><pre class="language-appcache"><code>NETWORK:
login.asp
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>可以使用星号来指示所有其他其他资源或文件都需要因特网连接。例如：</p><div class="language-appcache line-numbers-mode" data-ext="appcache"><pre class="language-appcache"><code>NETWORK:
*
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="fallback" tabindex="-1"><a class="header-anchor" href="#fallback" aria-hidden="true">#</a> FALLBACK</h3><p><code>FALLBACK</code> 部分规定如果无法建立因特网连接，则用 “<code>offline.html</code>” 替代 <code>/html/</code> 目录中的所有文件。例如：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>FALLBACK:
/html/ /offline.html
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>第一个 URI 是资源，第二个是替补</p></div><h2 id="更新缓存" tabindex="-1"><a class="header-anchor" href="#更新缓存" aria-hidden="true">#</a> 更新缓存</h2><p>一旦应用被缓存，它就会保持缓存直到发生下列情况：</p><ul><li>用户清空浏览器缓存</li><li><code>manifest</code> 文件被修改</li><li>由程序来更新应用缓存</li></ul><h2 id="实例" tabindex="-1"><a class="header-anchor" href="#实例" aria-hidden="true">#</a> 实例</h2><p>完整的 Cache Manifest 文件。例如：</p><div class="language-appcache line-numbers-mode" data-ext="appcache"><pre class="language-appcache"><code>CACHE MANIFEST
# 2023-05-11 v1.0.0
/theme.css
/logo.gif
/main.js

NETWORK:
login.asp

FALLBACK:
/html/ /offline.html
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>以 <code>#</code> 开头的是注释行，但也可满足其他用途。应用的缓存只会在其 <code>manifest</code> 文件改变时被更新。如果您编辑了一幅图像，或者修改了一个 JavaScript 函数，这些改变都不会被重新缓存。更新注释行中的日期和版本号是一种使浏览器重新缓存文件的办法</p></div><h2 id="关于应用程序缓存的注意事项" tabindex="-1"><a class="header-anchor" href="#关于应用程序缓存的注意事项" aria-hidden="true">#</a> 关于应用程序缓存的注意事项</h2><p>请留心缓存的内容。</p><p>一旦文件被缓存，则浏览器会继续展示已缓存的版本，即使您修改了服务器上的文件。为了确保浏览器更新缓存，您需要更新 <code>manifest</code> 文件。</p><div class="hint-container note"><p class="hint-container-title">注</p><p>浏览器对缓存数据的容量限制可能不太一样（某些浏览器的限制是每个站点 <code>5MB</code>）</p></div>`,43),c=[p];function i(l,o){return n(),s("div",null,c)}const r=a(e,[["render",i],["__file","app_cache.html.vue"]]);export{r as default};
